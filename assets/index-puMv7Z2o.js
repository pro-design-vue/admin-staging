import{A as x}from"./auth-title-D_DPzl8z.js";import{d as y,a3 as g,bP as $,an as E,a0 as F,a6 as z,b5 as I,b6 as k,b7 as a,a4 as e,M as t,$ as n,bE as s,bu as m,bg as L}from"./index-DGvT0Lnh.js";import{P as R}from"./regexp-BZOQi8XT.js";import{a3 as b,u as P,a5 as A}from"./basic-CBlmXXSK.js";import{F as G,I as _,a as h,c as U}from"./index-C3z9pWXV.js";import"./plugin-vueexport-helper-DlAUqK2U.js";import"./Col-D2vU_C18.js";import"./isEqual-CChwK98r.js";import"./hasIn-C3Cx24WL.js";import"./collapseMotion-77qa8FQy.js";import"./index-DGzwIfM2.js";const q=60,D=y({name:"CodeLoginForm",__name:"form",props:{loading:{type:Boolean,default:!1}},emits:["submit"],setup(C,{emit:d}){const c=d,o=g(0),i=g(!1),p=g(),S=$("formRef"),l=E({phoneNumber:"",code:""}),T=F(()=>i.value||o.value>0);function w(u){c("submit",u)}async function B(u){try{u?.preventDefault(),await S.value?.validate("phoneNumber"),i.value=!0,await N(),o.value=q,v()}catch{}finally{i.value=!1}}async function N(){}function v(){o.value>0&&(p.value=setTimeout(()=>{o.value--,v()},1e3))}return z(()=>{o.value=0,clearTimeout(p.value)}),(u,r)=>(k(),I(e(G),{ref:"formRef",model:l,name:"authentication_login",autocomplete:"off",onFinish:w},{default:a(()=>[t(e(h),{name:"phoneNumber",rules:[{required:!0,message:e(n)("authentication.mobileTip"),trigger:"change"},{pattern:e(R),message:e(n)("authentication.mobileErrortip"),trigger:"change"}]},{default:a(()=>[t(e(_),{value:l.phoneNumber,"onUpdate:value":r[0]||(r[0]=f=>l.phoneNumber=f),size:"large",placeholder:e(n)("authentication.mobile")},null,8,["value","placeholder"])]),_:1},8,["rules"]),t(e(h),{name:"code",rules:[{required:!0,message:e(n)("authentication.codeTip"),trigger:"change"}]},{default:a(()=>[t(e(U),{compact:""},{default:a(()=>[t(e(_),{value:l.code,"onUpdate:value":r[1]||(r[1]=f=>l.code=f),size:"large",type:"number",style:{width:"calc(100% - 180px)"},placeholder:e(n)("authentication.code")},null,8,["value","placeholder"]),t(e(b),{size:"large",style:{width:"180px"},loading:T.value,onClick:B},{default:a(()=>[s(m(o.value>0?e(n)("authentication.sendText",[o.value]):e(n)("authentication.sendCode")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules"]),t(e(h),{"no-style":""},{default:a(()=>[t(e(b),{type:"primary",loading:u.loading,block:"",size:"large","html-type":"submit"},{default:a(()=>[s(m(e(n)("common.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]))}}),V={class:"code-login"},ee=y({__name:"index",setup(C){const d=A(),c=P();function o(){d.go(-1)}return(i,p)=>(k(),L("div",V,[t(e(x),null,{desc:a(()=>[s(m(i.$t("authentication.codeSubtitle")),1)]),default:a(()=>[s(m(`${i.$t("authentication.welcomeBack")} ðŸ“²`)+" ",1)]),_:1}),t(e(D),{loading:e(c).loginLoading,onSubmit:e(c).authCodeLogin},null,8,["loading","onSubmit"]),t(e(b),{block:"",size:"large",style:{"margin-top":"15px"},onClick:o},{default:a(()=>[s(m(i.$t("common.back")),1)]),_:1})]))}});export{ee as default};
